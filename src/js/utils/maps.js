/* Google maps initilization and options */

import places from '../models/places.js';

export default function Map() {
    // Centering position for map
    const location = new google.maps.LatLng(43.7181557,-79.5181427);
    // General options for google maps initilization
    const mapOptions = {
        center: location,
        zoom: 10,
    };
    const map = new google.maps.Map(document.getElementById('map'),
		mapOptions);

    const marker = new google.maps.Marker({
        position: location,
        map: map,
        title: 'Click on marker to see info',
    });

    const contentString = "<div id='infowindow'>" +
	"<p><strong>Deer Creek Golf and Banquet Facility</strong></p>"
	+ "<p>2700 Audley Road, Ajax, Ontario, Canada</p>" +
	"<a href='https://goo.gl/maps/8ZuDCrDkhgC2' target='_blank'>Click for directions</a>" +
    "</div>";

    const infoWindow = new google.maps.InfoWindow({
		content: contentString,
	});

    this.addMapListeners = () => {
        try {
            if (google.maps) {
                let _this = this;
                google.maps.event.addListener(marker, 'click', () => {
                    infoWindow.open(map, marker);
                });
            }
            else {
                throw new Error({
                    name: 'Map error',
                    message: 'Cannot init map'
                });
            }
        }
        catch (error) {
            console.log(error);
        }
    };

    this.addMapListeners();
}
